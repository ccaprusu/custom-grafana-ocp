  apiVersion: template.openshift.io/v1
  kind: Template
  metadata:
    name: grafana
    labels:
      app: grafana
      template: grafana 
    annotations:
    "openshift.io/display-name": Grafana
    description: |
      A Grafana deployment that can be customized to use specific metric dashboards.
    tags: "monitoring,grafana"
  parameters:
  - description: Custom Grafana Image
    name: GRAFANA_IMAGE
    value: "grafana/grafana:6.6.2"
  - description: Custom Grafana Namespace
    name: NAMESPACE
  - description: Security Token
    name: SECURITY_TOKEN
  - description: Prometheus Datasource
    name: PROMETHEUS_DATASOURCE
  - description: Datasource name
    name: DS_OPENSHIFT_MONITORING_DATASOURCE
    value: openshift_monitoring_datasource
  - description: LDAP Host
    name: LDAP_HOST
  - description: Grafana Persistent Volume Size
    name: GRAFANA_PV_SIZE
    value: 20Gi
  - description: Grafana Route
    name: GRAFANA_ROUTE
  objects:
  - apiVersion: authorization.openshift.io/v1
    kind: ClusterRoleBinding
    metadata:
      name: grafana-cluster-monitoring-view
      labels:
        app: grafana
        template: grafana
    roleRef:
      name: cluster-monitoring-view
    subjects:
    - kind: ServiceAccount
      name: grafana
      namespace: "${NAMESPACE}"
  - apiVersion: route.openshift.io/v1
    kind: Route
    metadata:
      name: grafana
      namespace: "${NAMESPACE}"
      labels:
        app: grafana
        template: grafana
    spec:
      host: "${GRAFANA_ROUTE}"
      port:
        targetPort: grafana-3000
      tls:
        insecureEdgeTerminationPolicy: Redirect
        termination: edge
      to:
        kind: Service
        name: grafana
  - apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: grafana
        template: grafana
      name: grafana
      namespace: "${NAMESPACE}"
    spec:
      ports:
      - name: grafana-3000
        port: 3000
        protocol: TCP
        targetPort: 3000
      selector:
        app: grafana
  - apiVersion: apps.openshift.io/v1
    kind: DeploymentConfig
    metadata:
      annotations:
        template.alpha.openshift.io/wait-for-ready: "true" 
      labels:
        app: grafana
        template: grafana
      name: grafana
      namespace: "${NAMESPACE}"
    spec:
      replicas: 1
      selector:
        app: grafana
        deploymentconfig: grafana
      strategy:
        rollingParams:
          intervalSeconds: 1
          maxSurge: 25%
          maxUnavailable: 25%
          timeoutSeconds: 600
          updatePeriodSeconds: 1
        type: Rolling
      template:
        metadata:
          labels:
            app: grafana
            deploymentconfig: grafana
          name: grafana
        spec:
          containers:
          - image: ${GRAFANA_IMAGE}
            imagePullPolicy: IfNotPresent
            livenessProbe:
              failureThreshold: 3
              httpGet:
                path: /login
                port: 3000
                scheme: HTTP
              initialDelaySeconds: 2
              periodSeconds: 10
              successThreshold: 1
              timeoutSeconds: 1
            name: grafana
            readinessProbe:
              failureThreshold: 3
              httpGet:
                path: /login
                port: 3000
                scheme: HTTP
              initialDelaySeconds: 2
              periodSeconds: 15
              successThreshold: 1
              timeoutSeconds: 2
            resources: {}
            terminationMessagePath: /dev/termination-log
            terminationMessagePolicy: File
            volumeMounts:
            - mountPath: /etc/grafana
              name: grafana-config
            - mountPath: /var/lib/grafana
              name: grafana-data
            - mountPath: /etc/grafana/provisioning/datasources
              name: grafana-datasource
            - mountPath: /etc/grafana/provisioning/dashboards
              name: grafana-dashboards-config
            - mountPath: /etc/grafana/provisioning/dashboards/admin
              name: grafana-dashboards-admin
            - mountPath: /etc/grafana/provisioning/dashboards/end-user
              name: grafana-dashboards-end-user
          volumes:
          - name: grafana-config
            configMap:
              defaultMode: 420
              name: grafana-config
          - name: grafana-dashboards-config
            configMap:
              defaultMode: 420
              name: grafana-dashboards-config
          - name: grafana-dashboards-admin
            configMap:
              defaultMode: 420
              name: grafana-dashboards-admin
          - name: grafana-dashboards-end-user
            configMap:
              defaultMode: 420
              name: grafana-dashboards-end-user
          - name: grafana-datasource
            configMap:
              defaultMode: 420
              name: grafana-datasource
          - name: grafana-data
            persistentVolumeClaim:
              claimName: grafana-data
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: grafana-config
      labels:
        app: grafana
        template: grafana
      namespace: "${NAMESPACE}"
    data:
      grafana.ini: |
        ##################### Grafana Configuration Defaults #####################
        #
        # Do not modify this file in grafana installs
        #

        # possible values : production, development
        app_mode = production

        # instance name, defaults to HOSTNAME environment variable value or hostname if HOSTNAME var is empty
        instance_name = ${HOSTNAME}

        #################################### Paths ###############################
        [paths]
        # Path to where grafana can store temp files, sessions, and the sqlite3 db (if that is used)
        #
        data = data
        #
        # Directory where grafana can store logs
        #
        logs = data/log
        #
        # Directory where grafana will automatically scan and look for plugins
        #
        plugins = data/plugins
        #
        # folder that contains provisioning config files that grafana will apply on startup and while running.
        provisioning = /etc/grafana/provisioning

        #################################### Server ##############################
        [server]
        # Protocol (http, https, socket)
        protocol = http

        # The ip address to bind to, empty will bind to all interfaces
        http_addr =

        # The http port  to use
        http_port = 3000

        # The public facing domain name used to access grafana from a browser
        domain = localhost

        # Redirect to correct domain if host header does not match domain
        # Prevents DNS rebinding attacks
        enforce_domain = false

        # The full public facing url
        root_url = %(protocol)s://%(domain)s:%(http_port)s/

        # Log web requests
        router_logging = false

        # the path relative working path
        static_root_path = public

        # enable gzip
        enable_gzip = false

        # https certs & key file
        cert_file =
        cert_key =

        # Unix socket path
        socket = /tmp/grafana.sock

        #################################### Database ############################
        [database]
        # You can configure the database connection by specifying type, host, name, user and password
        # as separate properties or as on string using the url property.

        # Either "mysql", "postgres" or "sqlite3", it's your choice
        type = sqlite3
        host = 127.0.0.1:3306
        name = grafana
        user = root
        # If the password contains # or ; you have to wrap it with triple quotes. Ex """#password;"""
        password =
        # Use either URL or the previous fields to configure the database
        # Example: mysql://user:secret@host:port/database
        url =

        # Max conn setting default is 0 (mean not set)
        max_idle_conn =
        max_open_conn =

        # For "postgres", use either "disable", "require" or "verify-full"
        # For "mysql", use either "true", "false", or "skip-verify".
        ssl_mode = disable

        ca_cert_path =
        client_key_path =
        client_cert_path =
        server_cert_name =

        # For "sqlite3" only, path relative to data_path setting
        path = grafana.db

        [auth]
        # Set to true to disable (hide) the login form, useful if you use OAuth
        disable_login_form = false

        # Set to true to disable the signout link in the side menu. useful if you use auth.proxy
        disable_signout_menu = false

        #################################### Anonymous Auth ######################
        [auth.anonymous]
        enabled = yes

        org_role = Viewer

        #################################### Auth LDAP ###########################
        [auth.ldap]
        enabled = true

        config_file = /etc/grafana/ldap.toml
        
        #################################### Logging ##########################
        [log]
        # Either "console", "file", "syslog". Default is console and  file
        # Use space to separate multiple modes, e.g. "console file"
        mode = console file

        # Either "debug", "info", "warn", "error", "critical", default is "info"
        level = info

        # optional settings to set different levels for specific loggers. Ex filters = sqlstore:debug
        filters =

        # For "console" mode only
        [log.console]
        level =

        # log line format, valid options are text, console and json
        format = console

        # For "file" mode only
        [log.file]
        level =

        # log line format, valid options are text, console and json
        format = text

        # This enables automated log rotate(switch of following options), default is true
        log_rotate = true

        # Max line number of single file, default is 1000000
        max_lines = 1000000

        # Max size shift of single file, default is 28 means 1 << 28, 256MB
        max_size_shift = 28

        # Segment log daily, default is true
        daily_rotate = true

        # Expired days of log file(delete after max days), default is 7
        max_days = 7

        [log.syslog]
        level =

        # log line format, valid options are text, console and json
        format = text

        #################################### Alerting ############################
        [alerting]
        enabled = true
        # Makes it possible to turn off alert rule execution but alerting UI is visible
        execute_alerts = true

        #################################### Security ############################
        [security]
        admin_password = Ws2Fb1hpf4
      ldap.toml: |
        # config example: http://docs.grafana.org/installation/ldap/
        verbose_logging = true

        [[servers]]
        host = "${LDAP_HOST}"
        port = 3269
        use_ssl = true
        start_tls = false
        ssl_skip_verify = true
        bind_dn = "CN=user,OU=Users,DC=example,DC=com"
        bind_password = 'asdfwer324fasfas'
        search_filter = "(cn=%s)"
        search_base_dns = ["OU=Users,DC=example,DC=com"]

        [servers.attributes]
        name = "givenName"
        surname = "sn"
        username = "cn"
        email = "email"
        member_of = "memberOf"

        [[servers.group_mappings]]
        group_dn = "CN=ClusterAdmin,OU=Users,DC=example,DC=com"
        org_role = "Admin"

        [[servers.group_mappings]]
        group_dn = "CN=AppAdmin,OU=Users,DC=example,DC=com"
        org_role = "Viewer"
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: grafana-dashboards-config
      namespace: "${NAMESPACE}"
      labels:
        app: grafana
        template: grafana
    data:
      admin-user.yaml: |
        apiVersion: 1
        providers:
        - name: 'admin'
          orgId: 1
          folder: 'OpenShift Container PaaS Admin'
          folderUid: '3n_y7XlZz'
          type: file
          allowUiUpdates: true
          role: 'Admin'
          options:
            path: /etc/grafana/provisioning/dashboards/admin
      end-user.yaml: |
        apiVersion: 1
        providers:
        - name: 'end-user'
          orgId: 1
          folder: 'End User Dashboards'
          folderUid: '5j_y7XlWw'
          type: file
          role: 'Viewer'
          allowUiUpdates: true
          options:
            path: /etc/grafana/provisioning/dashboards/end-user
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: grafana-dashboards-admin
      namespace: "${NAMESPACE}"
      labels:
        app: grafana
        template: grafana
    data:
      dashboard-overview.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"Openshift/K8 Cluster Overview","editable":true,"gnetId":3870,"graphTooltip":0,"id":null,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":123,"panels":[],"title":"Resource Overview","type":"row"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":0,"y":1},"id":59,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":":node_cpu_utilisation:avg1m","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"Total CPU usage","type":"gauge"},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":4,"y":1},"id":135,"options":{"fieldOptions":{"calcs":["mean"],"defaults":{"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"auto","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"(avg(node:node_cpu_utilisation:avg1m)*sum(kube_node_status_capacity_cpu_cores)) / sum(kube_node_status_allocatable_cpu_cores)","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Allocatable","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":8,"y":1},"hideTimeOverride":true,"id":62,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(66, 254, 58, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"rgba(245, 54, 54, 0.9)","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"sum (container_memory_working_set_bytes{id=\"/\"}) / sum(kube_node_status_allocatable_memory_bytes)","format":"time_series","intervalFactor":2,"refId":"A","step":2}],"timeFrom":"1m","title":"Total Memory Usage","type":"gauge"},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":12,"y":1},"id":139,"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"auto","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"(avg(node:node_memory_utilisation:)*sum(kube_node_status_capacity_memory_bytes))/sum(kube_node_status_allocatable_memory_bytes)","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Allocatable","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":16,"y":1},"id":113,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(66, 254, 58, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"#d44a3a","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"sum(container_fs_usage_bytes{device=~\"/dev.*\"}) / sum(avg(node_filesystem_size_bytes{device=~\"/dev/.*\"}) by(device,instance))","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Cluster FileSystem Usage","type":"gauge"},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":20,"y":1},"id":141,"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 50, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"auto","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"sum(container_fs_usage_bytes{device=~\".*dockerlv\"}) / sum(avg(\rnode_filesystem_size_bytes{device=~\".*dockerlv\"}) by (instance))","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"FileSystem Allocatable Usage","type":"gauge"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":0,"y":7},"id":115,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":" core","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(node:node_cpu_utilisation:avg1m)*sum(kube_node_status_allocatable_cpu_cores)","format":"time_series","instant":false,"intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Used","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":3,"y":7},"id":137,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":" core","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(kube_node_status_allocatable_cpu_cores)","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Allocatable","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":2,"x":6,"y":7},"height":"","hideTimeOverride":true,"id":6,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":" core","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(node:node_num_cpu:sum)","format":"time_series","hide":false,"intervalFactor":2,"refId":"A","step":2}],"thresholds":"","timeFrom":"1m","title":"Total","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":8,"y":7},"id":117,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum (container_memory_working_set_bytes{id=\"/\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Used","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":12,"y":7},"height":"","id":65,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(kube_node_status_allocatable_memory_bytes)","format":"time_series","intervalFactor":2,"refId":"A","step":1800}],"thresholds":"","title":"Total","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":16,"y":7},"id":119,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum (container_fs_usage_bytes{device=~\"^/dev/.*$\",id=\"/\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Used","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":20,"y":7},"id":121,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(container_fs_usage_bytes{device=~\".*dockerlv\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Allocated","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":0,"y":10},"hideTimeOverride":false,"id":61,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{container!=\"docker-build\"} and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) / sum(kube_node_status_allocatable_cpu_cores)","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":900}],"timeFrom":null,"title":"CPU Request Allocation","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":4,"y":10},"id":60,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":4,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":2.5},{"color":"red","value":3.5}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"sum(kube_pod_container_resource_limits_cpu_cores and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) / sum(kube_node_status_allocatable_cpu_cores) ","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"CPU Limit Allocation","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":8,"y":10},"hideTimeOverride":true,"id":63,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"sum(kube_pod_container_resource_requests_memory_bytes{container!=\"docker-build\"} and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) / sum(kube_node_status_allocatable_memory_bytes)","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":10}],"timeFrom":"1m","title":"Memory Request Allocation","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":12,"y":10},"id":64,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":4,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":2.5},{"color":"red","value":3.5}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":"sum(kube_pod_container_resource_limits_memory_bytes  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) / sum(kube_node_status_allocatable_memory_bytes)","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"Memory Limit Allocation","type":"gauge"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":2,"format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":16,"y":10},"id":143,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(avg(node_filesystem_size_bytes{device=~\"/dev/.*\"}) by (device, instance))","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Total Capacity","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":20,"y":10},"id":145,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(avg(\rnode_filesystem_size_bytes{device=~\".*dockerlv\"}) by (instance))","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Allocatable","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":16},"id":103,"panels":[],"title":"Node Overview","type":"row"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":16,"x":0,"y":17},"id":97,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":100,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"#F2495C","value":null},{"color":"rgba(66, 254, 58, 0.97)","value":90},{"color":"rgba(66, 254, 58, 0.97)","value":100}]},"unit":"percent"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.7.3","targets":[{"expr":" sum(kube_node_status_condition{status=\"true\",condition=\"Ready\"}) / count(kube_node_info) * 100","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"title":"Nodes Ready","type":"gauge"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":0,"y":23},"id":129,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"count(kube_node_info)","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Total Nodes","type":"singlestat","valueFontSize":"120%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":5,"y":23},"id":131,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"count(kube_node_labels{label_node_role_kubernetes_io_master=\"true\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Master Nodes","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":9,"y":23},"id":133,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"count(kube_node_labels{label_node_role_kubernetes_io_infra=\"true\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Infra Nodes","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":13,"y":23},"id":132,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"count(kube_node_labels{label_node_role_kubernetes_io_compute=\"true\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Compute Nodes","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"columns":[],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fontSize":"100%","gridPos":{"h":7,"w":6,"x":0,"y":26},"id":89,"links":[{"targetBlank":true,"title":"Show Dashboard","url":"/d/IygkUEuWk/openshift-master-nodes?orgId=1"}],"pageSize":null,"scroll":true,"showHeader":true,"sort":{"col":1,"desc":false},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Value","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Nodes","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":true,"linkTargetBlank":true,"linkTooltip":"Drill down","linkUrl":"/d/admin-2/openshift-node?refresh=10s&orgId=1&var-datasource=openshift_monitoring_datasource&var-node=$__cell","mappingType":1,"pattern":"label_kubernetes_io_hostname","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"expr":"max(kube_node_labels{label_node_role_kubernetes_io_master=\"true\"}) by (label_kubernetes_io_hostname)","format":"table","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Master Nodes","transform":"table","type":"table"},{"columns":[],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fontSize":"100%","gridPos":{"h":7,"w":6,"x":6,"y":26},"id":90,"links":[{"targetBlank":true,"title":"Show Dashboard","url":"/d/WZk2dsXZz/openshift-infra-nodes?orgId=1"}],"pageSize":null,"scroll":true,"showHeader":true,"sort":{"col":1,"desc":false},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Value","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Nodes","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":true,"linkTargetBlank":true,"linkTooltip":"Drill down","linkUrl":"/d/admin-2/openshift-node?refresh=10s&orgId=1&var-datasource=openshift_monitoring_datasource&var-node=$__cell","mappingType":1,"pattern":"label_kubernetes_io_hostname","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"expr":"max(kube_node_labels{label_node_role_kubernetes_io_infra=\"true\"}) by (label_kubernetes_io_hostname)","format":"table","instant":true,"intervalFactor":1,"refId":"A"}],"title":"Infra Nodes","transform":"table","type":"table"},{"columns":[],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fontSize":"100%","gridPos":{"h":7,"w":6,"x":12,"y":26},"id":91,"links":[{"targetBlank":true,"title":"Show Dasboard","url":"/d/WTgntxXZz/openshift-compute-nodes?orgId=1"}],"pageSize":null,"scroll":true,"showHeader":true,"sort":{"col":1,"desc":false},"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Value","thresholds":[],"type":"hidden","unit":"short"},{"alias":"Nodes","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":true,"linkTargetBlank":true,"linkTooltip":"Drill down","linkUrl":"/d/admin-2/openshift-node?refresh=10s&orgId=1&var-datasource=openshift_monitoring_datasource&var-node=$__cell","mappingType":1,"pattern":"label_kubernetes_io_hostname","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"expr":"max(kube_node_labels{label_node_role_kubernetes_io_compute=\"true\"}) by (label_kubernetes_io_hostname)","format":"table","instant":true,"intervalFactor":1,"refId":"A"}],"title":"Compute Nodes","transform":"table","type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":33},"hiddenSeries":false,"id":3,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_node_status_condition{status=\"true\"}) by (condition)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{ condition }}","refId":"B","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Nodes Status","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":39},"id":125,"panels":[],"title":"Pod Overview","type":"row"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#299c46"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":3,"x":0,"y":40},"id":105,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(kube_pod_status_phase{phase=\"Running\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"0,1","title":"Total Running Pods","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#70dbed"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":3,"x":3,"y":40},"id":111,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(kube_namespace_status_phase{phase=~\"Active\",namespace!~\"^openshift-.+\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"0,1","title":"Total Active Projects","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":44},"hiddenSeries":false,"id":109,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"count(sum(kube_pod_status_phase{phase=\"Running\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:) by (node)","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Running Pods per Node","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":51},"hiddenSeries":false,"id":74,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_pod_status_phase) by (phase)","format":"time_series","intervalFactor":2,"legendFormat":"{{ phase }}","refId":"A","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Pod Phase across Cluster","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":58},"id":101,"title":"Resource Overview per Node","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":2,"fillGradient":2,"gridPos":{"h":7,"w":24,"x":0,"y":59},"hiddenSeries":false,"id":93,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_cpu_utilisation:avg1m","format":"time_series","intervalFactor":1,"legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Utilisation","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":2,"fillGradient":2,"gridPos":{"h":7,"w":24,"x":0,"y":66},"hiddenSeries":false,"id":95,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_memory_utilisation:","format":"time_series","intervalFactor":1,"legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Utilisation","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":2,"fillGradient":2,"gridPos":{"h":7,"w":24,"x":0,"y":73},"hiddenSeries":false,"id":99,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(max(node_filesystem_size{fstype=~\"ext[234]|btrfs|xfs|zfs\"} - node_filesystem_avail{fstype=~\"ext[234]|btrfs|xfs|zfs\"}) by (device,pod,namespace)) by (pod,namespace)\n/ scalar(sum(max(node_filesystem_size{fstype=~\"ext[234]|btrfs|xfs|zfs\"}) by (device,pod,namespace)))\n* on (namespace, pod) group_left (node) node_namespace_pod:kube_pod_info:","format":"time_series","intervalFactor":1,"legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cluster File System Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":80},"id":127,"panels":[],"title":"Resource Overview per Project","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":81},"hiddenSeries":false,"id":107,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum ((kube_pod_container_resource_requests_cpu_cores)) by (namespace)","format":"time_series","intervalFactor":1,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Core Request Allocation per Project","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"core","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":88},"height":"300","hiddenSeries":false,"id":58,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum ((kube_pod_container_resource_requests_memory_bytes)) by (namespace)","format":"time_series","intervalFactor":2,"legendFormat":"{{ namespace }}","refId":"A","step":120}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Request Allocation per Project","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"decbytes","label":"memory","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":22,"style":"dark","tags":["overall","cluster"],"templating":{"list":[]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Openshift / Cluster Overview","uid":"admin-1","variables":{"list":[]},"version":1} 
      dashboard-API-latency.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1589382928056,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"Returns the average number of apiserver requests over the last minute","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":0},"hiddenSeries":false,"id":23,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(apiserver_request_count{job=\"apiserver\"}[1m]))","format":"time_series","intervalFactor":1,"legendFormat":"API server requests","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total API Server Request/s [1m]","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"Returns the average number of apiserver requests over the last minute per master instance","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":24,"x":0,"y":8},"hiddenSeries":false,"id":32,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"min","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(apiserver_request_count{job=\"apiserver\"}[1m])) by (instance)","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"{{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total API Server Request/s [1m] per Master Node","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"description":"Returns the number of API Server Requests grouped by Verb over the last minute.","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":17},"hiddenSeries":false,"id":19,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(apiserver_request_count{job=\"apiserver\",verb!~\"^(?:LIST|WATCH|WATCHLIST|PROXY|CONNECT)$\"}[1m]) ) by (verb)","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"API Server Request/s  [1m] Verb","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"description":"Returns the number of API Server Requests grouped by Code over the last  minute.","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":17},"hiddenSeries":false,"id":17,"legend":{"alignAsTable":false,"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(apiserver_request_count{job=\"apiserver\",verb!~\"^(?:LIST|WATCH|WATCHLIST|PROXY|CONNECT)$\"}[1m]) ) BY (code)","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"API Server Requests/s [1m] Code","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"description":"The number of concurrent requests to the apiserver","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":19,"x":0,"y":26},"hiddenSeries":false,"id":30,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(apiserver_current_inflight_requests)","format":"heatmap","instant":false,"intervalFactor":1,"legendFormat":"ApiServer Requests in Flight","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"APIServer Requests In Flight","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"none","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"description":"Current number of concurrent API Server requests","format":"short","gauge":{"maxValue":500,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":9,"w":5,"x":19,"y":26},"id":28,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"repeat":null,"repeatDirection":"h","sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(apiserver_current_inflight_requests)","format":"time_series","interval":"","intervalFactor":1,"refId":"A"}],"thresholds":"166,333","title":"Current APIServer Requests In Flight","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"description":"The number of concurrent requests to the apiserver per master instance","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":24,"x":0,"y":35},"hiddenSeries":false,"id":34,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(apiserver_current_inflight_requests{job=\"apiserver\"}) by (instance)","format":"time_series","intervalFactor":1,"legendFormat":"{{instance}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"APIServer Requests In Flight per Master instance","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":true,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"Returns the API Server Request Latencies grouped by resource, subresource and verb over the last minute.","fill":1,"fillGradient":0,"gridPos":{"h":10,"w":24,"x":0,"y":44},"hiddenSeries":false,"id":26,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":false,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"histogram_quantile(0.99, sum(rate(apiserver_request_latencies_bucket{job=\"apiserver\",subresource!=\"log\", verb=~\"(POST|GET)\"}[1m])) by (le, resource,subresource, verb))","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"API Server Request Latency [1m] POST|GET","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"µs","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":22,"style":"dark","tags":[],"templating":{"list":[{"current":{"text":"openshift-monitoring-datasource","value":"openshift-monitoring-datasource"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"refresh_intervals":["10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Openshift / KubeAPI Metrics","uid":"admin-5","version":9}
      dashboard-namespace.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1589382934978,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":4,"panels":[],"repeat":null,"title":"Namespace Usage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":3,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":0,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":null,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}) by (pod_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage by pod","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":3,"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_usage_bytes{namespace=\"$namespace\", container_name!=\"\"}) by (pod_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage by pod","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":8},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) ","legendFormat":"Limit","refId":"C"},{"expr":" sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"})","format":"time_series","intervalFactor":2,"legendFormat":"Usage ","legendLink":null,"refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","legendFormat":"Request ","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":8},"hiddenSeries":false,"id":8,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) \r","format":"time_series","intervalFactor":2,"legendFormat":"Limit","legendLink":null,"refId":"A","step":10},{"expr":"sum (container_memory_working_set_bytes{namespace=\"$namespace\"})","format":"time_series","intervalFactor":2,"legendFormat":"Usage","legendLink":null,"refId":"B","step":10},{"expr":" sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","format":"time_series","intervalFactor":2,"legendFormat":"Request","legendLink":null,"refId":"C","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"3","logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"In addition to persistent storage, pods and containers may require ephemeral or transient local storage for their operation. The lifetime of this ephemeral storage does not extend beyond the life of the individual pod, and this ephemeral storage cannot be shared across pods.","fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":15},"hiddenSeries":false,"id":10,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_fs_usage_bytes{namespace=\"$namespace\"}) by (pod_name)","format":"time_series","instant":false,"intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Ephemeral Storage Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":21},"id":5,"panels":[],"repeat":null,"title":"CPU Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":8,"w":24,"x":0,"y":22},"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":3,"desc":true},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"CPU Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"CPU Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Pod","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":true,"linkTooltip":"Drill down","linkUrl":"/d/admin-4/openshift-pod?var-namespace=$namespace&var-pod=$__cell","pattern":"pod","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CPU Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":30},"id":7,"panels":[],"repeat":null,"title":"Memory Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":6,"w":24,"x":0,"y":31},"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":3,"desc":true},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"Memory Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Memory Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Pod","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":true,"linkTooltip":"Drill down","linkUrl":"/d/admin-4/openshift-pod?var-namespace=$namespace&var-pod=$__cell","pattern":"pod","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\",container_name!=\"\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\",container_name!=\"\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\",container_name!=\"\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Memory Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]}],"refresh":"1m","schemaVersion":22,"style":"dark","tags":["namespace ","cpu","memory"],"templating":{"list":[{"current":{"text":"openshift-monitoring-datasource","value":"openshift-monitoring-datasource"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{},"datasource":"$datasource","definition":"","hide":0,"includeAll":false,"label":"namespace","multi":false,"name":"namespace","options":[],"query":"label_values(kube_pod_info, namespace)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"OpenShift / Namespace","uid":"admin-3","version":13}
      dashboard-node.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1589382938978,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":9,"panels":[],"repeat":null,"title":"CPU","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":0,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_cpu_utilisation:avg1m{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Utilisation","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Utilisation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_cpu_saturation_load1:{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Saturation","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Saturation (Load1)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":8},"id":10,"panels":[],"repeat":null,"title":"Memory","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":9},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_memory_utilisation:{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Memory","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Utilisation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":9},"hiddenSeries":false,"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_memory_swap_io_bytes:sum_rate{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Swap IO","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Saturation (Swap I/O)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":16},"id":11,"panels":[],"repeat":null,"title":"Disk","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":17},"hiddenSeries":false,"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_disk_utilisation:avg_irate{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Utilisation","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk IO Utilisation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":17},"hiddenSeries":false,"id":5,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_disk_saturation:avg_irate{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Saturation","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk IO Saturation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":24},"id":12,"panels":[],"repeat":null,"title":"Net","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":25},"hiddenSeries":false,"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_net_utilisation:sum_irate{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Utilisation","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Net Utilisation (Transmitted)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":25},"hiddenSeries":false,"id":7,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_net_saturation:sum_irate{node=\"$node\"}","format":"time_series","intervalFactor":2,"legendFormat":"Saturation","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Net Saturation (Dropped)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"Bps","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":32},"id":13,"panels":[],"repeat":null,"title":"Disk","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":33},"hiddenSeries":false,"id":8,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_filesystem_usage:\n* on (namespace, pod) group_left (node) node_namespace_pod:kube_pod_info:{node=\"$node\"}\n","format":"time_series","intervalFactor":2,"legendFormat":"{{device}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk Utilisation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":22,"style":"dark","tags":[],"templating":{"list":[{"current":{"text":"openshift-monitoring-datasource","value":"openshift-monitoring-datasource"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{},"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","definition":"label_values(kube_node_info, node)","hide":0,"includeAll":false,"label":"node","multi":false,"name":"node","options":[],"query":"label_values(kube_node_info, node)","refresh":1,"regex":"","skipUrlSync":false,"sort":3,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"OpenShift / Node","uid":"admin-2","version":5}
      dashboard-node-by-type.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"Openshift/K8 Cluster Overview","editable":true,"gnetId":3870,"graphTooltip":0,"id":null,"iteration":1589382942400,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":123,"panels":[],"title":"Resource Overview","type":"row"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":0,"y":1},"id":59,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"avg(node:node_cpu_utilisation:avg1m{node=~\"$nodes\"})","format":"time_series","hide":false,"instant":false,"interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"Total CPU Capacity Usage","type":"gauge"},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":4,"y":1},"id":127,"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"from":"","id":1,"operator":"","text":"N/A","to":"","type":1,"value":"null"}],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"title":"","unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"(avg(node:node_cpu_utilisation:avg1m{node=~\"$nodes\"})*sum(kube_node_status_capacity_cpu_cores{node=~\"$nodes\"})) / sum(kube_node_status_allocatable_cpu_cores{node=~\"$nodes\"})","interval":"10s","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Total CPU Allocated","type":"gauge"},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":8,"y":1},"id":131,"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"from":"","id":1,"operator":"","text":"N/A","to":"","type":1,"value":"null"}],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"auto","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"avg(node:node_memory_utilisation:{node=~\"$nodes\"})","intervalFactor":2,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Total Memory Capacity Usage","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":12,"y":1},"hideTimeOverride":true,"id":62,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(66, 254, 58, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"rgba(245, 54, 54, 0.9)","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"(avg(node:node_memory_utilisation:{node=~\"$nodes\"})*sum(kube_node_status_capacity_memory_bytes{node=~\"$nodes\"}))/sum(kube_node_status_allocatable_memory_bytes{node=~\"$nodes\"})","format":"time_series","intervalFactor":1,"refId":"A","step":2}],"timeFrom":"1m","title":"Total Allocated Usage","type":"gauge"},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":16,"y":1},"id":135,"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"auto","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"sum(label_replace(container_fs_usage_bytes{device=~\"/dev.*\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")*on(node_ip) group_left(nodename) \r\nlabel_replace(node_uname_info{nodename=~\"$nodes\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) / sum(sum(avg(label_replace(\r\nnode_filesystem_size_bytes{device=~\"/dev/.*\"},\r\n \"node_ip\",\"$1\",\"instance\",\"(.*):.*\")\r\n*on(node_ip) group_left(nodename) label_replace(\r\nnode_uname_info{nodename=~\"$nodes\"},\r\n\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (device, nodename)) by (nodename))","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Filesystem Capacity Usage","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":20,"y":1},"id":113,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"#FA6400","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"sum(label_replace(container_fs_usage_bytes{device=~\".*dockerlv\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")*on(node_ip) group_left(nodename) \r\nlabel_replace(node_uname_info{nodename=~\"$nodes\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) / sum(avg(label_replace(\r\nnode_filesystem_size_bytes{device=~\".*dockerlv\"},\r\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")\r\n*on(node_ip) group_left(nodename) label_replace(\r\nnode_uname_info{nodename=~\"$nodes\"},\r\n\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (nodename))","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"FileSystem Allocatable Usage","type":"gauge"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":0,"y":7},"id":115,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":" core","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(node:node_cpu_utilisation:avg1m{node=~\"$nodes\"})*sum(kube_node_status_allocatable_cpu_cores{node=~\"$nodes\"})","format":"time_series","instant":false,"intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Used","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":3,"y":7},"id":129,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"pluginVersion":"6.6.2","postfix":" core","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(kube_node_status_allocatable_cpu_cores{node=~\"$nodes\"})","intervalFactor":2,"refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Allocatable","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":2,"x":6,"y":7},"height":"","hideTimeOverride":true,"id":6,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":" core","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(kube_node_status_capacity_cpu_cores{node=~\"$nodes\"})","format":"time_series","hide":false,"intervalFactor":2,"refId":"B","step":2}],"thresholds":"","timeFrom":"1m","title":"Total","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":1,"format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":8,"y":7},"id":117,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"avg(node:node_memory_utilisation:{node=~\"$nodes\"})*sum(kube_node_status_allocatable_memory_bytes{node=~\"$nodes\"})","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Used","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":1,"format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":3,"x":11,"y":7},"height":"","id":65,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(kube_node_status_allocatable_memory_bytes{node=~\"$nodes\"})","format":"time_series","intervalFactor":2,"refId":"A","step":1800}],"thresholds":"","title":"Allocatable","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":2,"x":14,"y":7},"id":133,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(kube_node_status_capacity_memory_bytes{node=~\"$nodes\"})","intervalFactor":2,"refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Total","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":16,"y":7},"id":139,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(label_replace(container_fs_usage_bytes{device=~\"/dev.*\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")*on(node_ip) group_left(nodename) \r\nlabel_replace(node_uname_info{nodename=~\"$nodes\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\"))","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Filesystem used","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":1,"format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":20,"y":7},"id":119,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(label_replace(container_fs_usage_bytes{device=~\".*dockerlv\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")*on(node_ip) group_left(nodename) \r\nlabel_replace(node_uname_info{nodename=~\"$nodes\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\"))","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Allocated","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":0,"y":10},"hideTimeOverride":false,"id":61,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{container!=\"docker-build\",node=~\"$nodes\"} and on(pod, namespace)( kube_pod_status_phase{ phase!=\"Succeeded\"}==1 and kube_pod_status_phase{ phase!=\"Failed\"}==1)) / sum(kube_node_status_allocatable_cpu_cores{node=~\"$nodes\"})","refId":"B"}],"timeFrom":null,"title":"CPU Request Commitment","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":4,"y":10},"id":60,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":4,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":2.5},{"color":"red","value":3.5}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{node=~\"$nodes\"}  and on(pod, namespace)( kube_pod_status_phase{ phase!=\"Succeeded\"}==1 and kube_pod_status_phase{ phase!=\"Failed\"}==1)) / sum(kube_node_status_allocatable_cpu_cores{node=~\"$nodes\"}) ","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"CPU Limit Commitment","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":8,"y":10},"hideTimeOverride":true,"id":63,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":1,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":0.7},{"color":"red","value":0.9}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"sum(kube_pod_container_resource_requests_memory_bytes{container!=\"docker-build\",node=~\"$nodes\"} and on(pod, namespace)( kube_pod_status_phase{ phase!=\"Succeeded\"}==1 and kube_pod_status_phase{ phase!=\"Failed\"}==1)) / sum(kube_node_status_allocatable_memory_bytes{node=~\"$nodes\"})","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":10}],"timeFrom":"1m","title":"Memory Request Commitment","type":"gauge"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":12,"y":10},"id":64,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":0,"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":4,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"rgba(98, 245, 54, 0.9)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":2.5},{"color":"red","value":3.5}]},"unit":"percentunit"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":"sum(kube_pod_container_resource_limits_memory_bytes{node=~\"$nodes\"}  and on(pod, namespace)( kube_pod_status_phase{ phase!=\"Succeeded\"}==1 and kube_pod_status_phase{ phase!=\"Failed\"}==1)) / sum(kube_node_status_allocatable_memory_bytes{node=~\"$nodes\"}) ","format":"time_series","hide":false,"interval":"10s","intervalFactor":1,"refId":"A","step":900}],"title":"Memory Limit Commitment","type":"gauge"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":16,"y":10},"id":121,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(sum(avg(label_replace(\r\nnode_filesystem_size_bytes{device=~\"/dev/.*\"},\r\n \"node_ip\",\"$1\",\"instance\",\"(.*):.*\")\r\n*on(node_ip) group_left(nodename) label_replace(\r\nnode_uname_info{nodename=~\"$nodes\"},\r\n\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (device, nodename)) by (nodename))","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"","title":"Total","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"bytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":3,"w":4,"x":20,"y":10},"id":137,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(avg(label_replace(\r\nnode_filesystem_size_bytes{device=~\".*dockerlv\"},\r\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")\r\n*on(node_ip) group_left(nodename) label_replace(\r\nnode_uname_info{nodename=~\"$nodes\"},\r\n\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (nodename))","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Allocatable","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":16},"id":103,"panels":[],"title":"Node Overview","type":"row"},{"cacheTimeout":null,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":6,"w":4,"x":0,"y":17},"id":97,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":100,"min":0,"nullValueMode":"connected","thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"rgba(98, 245, 54, 0.9)","value":90},{"color":"rgba(98, 245, 54, 0.9)","value":100}]},"unit":"percent"},"overrides":[],"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.6.2","targets":[{"expr":" sum(kube_node_status_condition{status=\"true\",condition=\"Ready\",node=~\"$nodes\"}) / count(kube_node_info{node=~\"$nodes\"}) * 100","format":"time_series","instant":true,"intervalFactor":1,"refId":"A"}],"title":"Compute Nodes Ready","type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":6,"w":20,"x":4,"y":17},"hiddenSeries":false,"id":3,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_node_status_condition{status=\"true\",node=~\"$nodes\"}) by (condition)","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{ condition }}","refId":"B","step":240}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Nodes Status","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":23},"id":125,"panels":[],"title":"Pod Overview","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":6,"w":21,"x":0,"y":24},"hiddenSeries":false,"id":109,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"count(sum(kube_pod_status_phase{phase=\"Running\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:{node=~\"$nodes\"}) by (node)","format":"time_series","intervalFactor":1,"legendFormat":"{{node}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Running Pods per Node","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"colorBackground":false,"colorValue":true,"colors":["#d44a3a","rgba(237, 129, 40, 0.89)","#299c46"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":6,"w":3,"x":21,"y":24},"id":105,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"expr":"sum(count(sum(kube_pod_status_phase{phase=\"Running\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:{node=~\"$nodes\"}) by (node))","format":"time_series","intervalFactor":1,"refId":"A"}],"thresholds":"0,1","title":"Total Running Pods","type":"singlestat","valueFontSize":"100%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":24,"x":0,"y":30},"hiddenSeries":false,"id":74,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"count(sum(kube_pod_status_phase{phase=\"Running\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:{node=~\"$nodes\"}\r\n) by (phase)","format":"time_series","intervalFactor":2,"legendFormat":"Running","refId":"A","step":240},{"expr":"count(sum(kube_pod_status_phase{phase=\"Succeeded\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:{node=~\"$nodes\"}\r) by (phase)","legendFormat":"Succeeded","refId":"B"},{"expr":"count(sum(kube_pod_status_phase{phase=\"Failed\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:{node=~\"$nodes\"}\r) by (phase)","legendFormat":"Failed","refId":"C"},{"expr":"count(sum(kube_pod_status_phase{phase=\"Pending\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:{node=~\"$nodes\"}\r) by (phase)","legendFormat":"Pending","refId":"D"},{"expr":"count(sum(kube_pod_status_phase{phase=\"Unknown\"} !=0) by (namespace,pod) * on (namespace, pod) group_left (node)node_namespace_pod:kube_pod_info:{node=~\"$nodes\"}\r) by (phase)","legendFormat":"Unknown","refId":"E"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Pod Phase across Cluster","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":37},"id":101,"title":"Resource Overview per Node","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":2,"fillGradient":2,"gridPos":{"h":7,"w":24,"x":0,"y":38},"hiddenSeries":false,"id":93,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_cpu_utilisation:avg1m{node=~\"$nodes\"}","format":"time_series","intervalFactor":1,"legendFormat":"Capacity - {{node}}","refId":"A"},{"expr":"((node:node_cpu_utilisation:avg1m{node=~\"$nodes\"}*on(node)kube_node_status_capacity_cpu_cores{node=~\"$nodes\"})/on(node) kube_node_status_allocatable_cpu_cores{node=~\"$nodes\"}) ","format":"time_series","intervalFactor":1,"legendFormat":"Allocatable - {{node}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Utilisation","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":2,"fillGradient":2,"gridPos":{"h":7,"w":24,"x":0,"y":45},"hiddenSeries":false,"id":95,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"node:node_memory_utilisation:{node=~\"$nodes\"}","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"Capacity - {{node}}","refId":"A"},{"expr":"((node:node_memory_utilisation:{node=~\"$nodes\"}*on(node)kube_node_status_capacity_memory_bytes{node=~\"$nodes\"})/on(node)kube_node_status_allocatable_memory_bytes{node=~\"$nodes\"})","format":"time_series","intervalFactor":1,"legendFormat":"Allocatable - {{node}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Utilisation","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":2,"fillGradient":2,"gridPos":{"h":7,"w":24,"x":0,"y":52},"hiddenSeries":false,"id":99,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(label_replace(container_fs_usage_bytes{device=~\".*dockerlv\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")*on(node_ip) group_left(nodename) \r\nlabel_replace(node_uname_info{nodename=~\"$nodes\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (nodename) / avg(label_replace(\r\nnode_filesystem_size_bytes{device=~\".*dockerlv\"},\r\n\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")\r\n*on(node_ip) group_left(nodename) label_replace(\rnode_uname_info{nodename=~\"$nodes\"},\r\n\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (nodename)\n","format":"time_series","intervalFactor":1,"legendFormat":"Allocatable - {{nodename}}","refId":"A"},{"expr":"sum(label_replace(container_fs_usage_bytes{device=~\"/dev.*\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")*on(node_ip) group_left(nodename) \r\nlabel_replace(node_uname_info{nodename=~\"$nodes\"},\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (nodename) / sum(avg(label_replace(\r\nnode_filesystem_size_bytes{device=~\"/dev/.*\"},\r\n \"node_ip\",\"$1\",\"instance\",\"(.*):.*\")\r\n*on(node_ip) group_left(nodename) label_replace(\r\nnode_uname_info{nodename=~\"$nodes\"},\r\n\"node_ip\",\"$1\",\"instance\",\"(.*):.*\")) by (device, nodename)) by (nodename)\n","format":"time_series","intervalFactor":1,"legendFormat":"Capacity - {{nodename}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"File System Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percentunit","label":null,"logBase":1,"max":"1","min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"5s","schemaVersion":22,"style":"dark","tags":["QoS","node"],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":"compute","value":"compute"},"hide":0,"includeAll":false,"label":"Node Type","multi":false,"name":"node_type","options":[{"selected":false,"text":"master","value":"master"},{"selected":false,"text":"infra","value":"infra"},{"selected":true,"text":"compute","value":"compute"}],"query":"master,infra,compute","skipUrlSync":false,"type":"custom"},{"allValue":null,"current":{},"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","definition":"label_values(kube_node_labels{label_node_role_kubernetes_io_$node_type=\"true\"},label_kubernetes_io_hostname)","hide":0,"includeAll":false,"label":"Node","multi":true,"name":"nodes","options":[],"query":"label_values(kube_node_labels{label_node_role_kubernetes_io_$node_type=\"true\"},label_kubernetes_io_hostname)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-15m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Openshift / Nodes by Type","uid":"WTgntxXZY","version":3}
      dashboard-overall-projects-consumption.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"Shows the overall  CPU/Memory consumption per project","editable":true,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"Shows the overall cluster CPU consumption (cores) per project ","fill":1,"fillGradient":0,"gridPos":{"h":14,"w":24,"x":0,"y":0},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate) by (namespace)","hide":false,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Overall Project CPU Consumption","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"CPU Cores","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":"","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"Shows the overall cluster Memory consumption (GB) per project ","fill":1,"fillGradient":0,"gridPos":{"h":12,"w":24,"x":0,"y":14},"hiddenSeries":false,"id":4,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"namespace:container_memory_usage_bytes:sum","hide":false,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Overall Project Memory Consumption","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"schemaVersion":22,"style":"dark","tags":["project","cpu","memory","overall"],"templating":{"list":[]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Openshift / Overall Projects Consumption","uid":"vZimkCuWz","version":4}
      dashboard-overall-projects-qos.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"Shows the overall  CPU/Memory consumption per project","editable":true,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":3,"description":"Shows the overall cluster CPU request (cores) per project ","fill":0,"fillGradient":0,"gridPos":{"h":14,"w":24,"x":0,"y":0},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_pod_container_resource_requests_cpu_cores and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) by (namespace)","hide":false,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Overall Project CPU Request","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":1,"format":"short","label":"CPU Cores","logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":"","logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"Shows the overall cluster CPU limits(cores) per project","fill":0,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":14},"hiddenSeries":false,"id":6,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":null,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"  sum(kube_pod_container_resource_limits_cpu_cores and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) by (namespace)","hide":false,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Overall Project CPU Limits","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":1,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"description":"Shows the overall cluster Memoryrequest (cores) per project ","fill":0,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":22},"hiddenSeries":false,"id":8,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"  sum(kube_pod_container_resource_requests_memory_bytes and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) by (namespace)","legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Overall Project Memory Request","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"Shows the overall cluster Memory Limit consumption (GB) per project ","fill":0,"fillGradient":0,"gridPos":{"h":12,"w":24,"x":0,"y":30},"hiddenSeries":false,"id":4,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":300,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_pod_container_resource_limits_memory_bytes and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) by (namespace)","hide":false,"legendFormat":"{{namespace}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Overall Project Memory Limit","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"schemaVersion":22,"style":"dark","tags":["project","cpu","memory","overall","request","limits"],"templating":{"list":[]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Openshift / Overall Projects QoS","uid":"C1AG0pCZz","version":9}
      dashboard-pod.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1589382956237,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":4,"panels":[],"repeat":null,"title":"CPU Usage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":10,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":0,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\"}) by (container_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{container_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":10,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\", container_name!=\"\"}) by (container_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{container_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":3,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":8},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) ","hide":false,"legendFormat":"Limit","refId":"C"},{"expr":" sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\",pod_name=\"$pod\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"Usage ","legendLink":null,"refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","hide":false,"legendFormat":"Request ","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":8},"hiddenSeries":false,"id":11,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) \r","format":"time_series","intervalFactor":2,"legendFormat":"Limit","legendLink":null,"refId":"A","step":10},{"expr":"pod_name:container_memory_usage_bytes:sum{namespace=\"$namespace\",pod_name=\"$pod\"}","format":"time_series","intervalFactor":2,"legendFormat":"Usage","legendLink":null,"refId":"B","step":10},{"expr":" sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","format":"time_series","intervalFactor":2,"legendFormat":"Request","legendLink":null,"refId":"C","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"3","logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"description":"In addition to persistent storage, pods and containers may require ephemeral or transient local storage for their operation. The lifetime of this ephemeral storage does not extend beyond the life of the individual pod, and this ephemeral storage cannot be shared across pods.","fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":15},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"container_fs_usage_bytes{pod_name=\"$pod\",container_name!=\"POD\"}","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Ephemeral Storage Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":21},"id":5,"panels":[],"repeat":null,"title":"CPU Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":4,"w":24,"x":0,"y":22},"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":null,"desc":false},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"CPU Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"CPU Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Container","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"container","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CPU Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":26},"id":7,"panels":[],"repeat":null,"title":"Memory Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":4,"w":24,"x":0,"y":27},"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":0,"desc":true},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"Memory Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Memory Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Container","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"container","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\", container_name!=\"\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\", pod=\"$pod\", container_name!=\"\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Memory Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]}],"refresh":false,"schemaVersion":22,"style":"dark","tags":["pod"],"templating":{"list":[{"current":{"text":"openshift-monitoring-datasource","value":"openshift-monitoring-datasource"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{},"datasource":"$datasource","definition":"","hide":0,"includeAll":false,"label":"namespace","multi":false,"name":"namespace","options":[],"query":"label_values(kube_pod_info, namespace)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"$datasource","definition":"","hide":0,"includeAll":false,"label":"pod","multi":false,"name":"pod","options":[],"query":"label_values(kube_pod_info{namespace=\"$namespace\"}, pod)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"OpenShift / Pod","uid":"admin-4","version":11}
      dashboard-project-resources.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"description":"Display usage of ResourceQuota by namespace in OCP cluster.","editable":true,"gnetId":9809,"graphTooltip":0,"id":null,"iteration":1589382957233,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":15,"panels":[],"title":"CPU Resources","type":"row"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#9ac48a","#e5ac0e","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":6,"x":0,"y":1},"id":5,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"requests.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"60, 80","title":"Requests Allocated / Requests Quota (CPU)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":7,"x":6,"y":1},"id":4,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (kube_resourcequota{resource=\"limits.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"60,90","title":"Limits Allocated / Limits Quota (CPU)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#e24d42","#9ac48a","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":6,"x":13,"y":1},"id":6,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (rate(container_cpu_usage_seconds_total{namespace=\"$namespace\"}[1m])) / sum(kube_resourcequota{resource=\"requests.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"80,100","title":"Current Usage / Request Quota (CPU)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":5,"x":19,"y":1},"id":11,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (rate(container_cpu_usage_seconds_total{namespace=\"$namespace\"}[1m])) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"60,90","title":"Current Usage / Limits Quota (CPU)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"This represents the total [CPU resource requests](https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#meaning-of-cpu) in the cluster.\nFor comparison the total [allocatable CPU cores](https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node-allocatable.md) is also shown.","editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{"threshold1Color":"rgba(216, 200, 27, 0.27)","threshold2Color":"rgba(234, 112, 112, 0.22)"},"gridPos":{"h":8,"w":24,"x":0,"y":5},"hiddenSeries":false,"id":1,"isNew":false,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":250,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"CPU Actual Usage","fill":5},{"alias":"CPU Actual Usage","linewidth":3}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum (rate(container_cpu_usage_seconds_total{namespace=\"$namespace\"}[1m]))","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"CPU Usage","refId":"E"},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"limits.cpu\", type=\"hard\"}","format":"time_series","hide":false,"intervalFactor":1,"legendFormat":"CPU Quota Limits","refId":"A","step":20},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"requests.cpu\", type=\"hard\"}","format":"time_series","intervalFactor":1,"legendFormat":"CPU Quota Requests","refId":"C"},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"limits.cpu\", type=\"used\"}","format":"time_series","intervalFactor":1,"legendFormat":"CPU Allocated Limits","refId":"B"},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"requests.cpu\", type=\"used\"}","format":"time_series","intervalFactor":1,"legendFormat":"CPU Allocated Requests","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"short","label":"CPU Cores","logBase":1,"min":"0","show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":13},"id":13,"title":"Memory Resources","type":"row"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#9ac48a","#e5ac0e","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":6,"x":0,"y":14},"id":8,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (kube_resourcequota{resource=\"requests.memory\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"requests.memory\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"60,80","title":"Requests Allocated / Requests Quota (Memory)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":7,"x":6,"y":14},"id":7,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (kube_resourcequota{resource=\"limits.memory\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.memory\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"60,90","title":"Limits Allocated / Limits Quota (Memory)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#e24d42","#9ac48a","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":6,"x":13,"y":14},"id":10,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\", namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"requests.memory\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"80,100","title":"Current Usage / Request Quota (Memory)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","format":"percent","gauge":{"maxValue":100,"minValue":0,"show":true,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":4,"w":5,"x":19,"y":14},"id":9,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"tableColumn":"","targets":[{"bucketAggs":[{"field":"@timestamp","id":"2","settings":{"interval":"auto","min_doc_count":0,"trimEdges":0},"type":"date_histogram"}],"expr":"sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\", namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.memory\",type=\"hard\",namespace=\"$namespace\"}) * 100","format":"time_series","intervalFactor":1,"metrics":[{"field":"select field","id":"1","type":"count"}],"query":"sum (kube_resourcequota{resource=\"requests.cpu\",type=\"used\",namespace=\"$namespace\"}) / sum(kube_resourcequota{resource=\"limits.cpu\",type=\"hard\",namespace=\"$namespace\"}) * 100","refId":"A","timeField":"@timestamp"}],"thresholds":"60,90","title":"Current Usage / Limits Quota (Memory)","type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"avg"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"This represents the total [CPU resource requests](https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#meaning-of-cpu) in the cluster.\nFor comparison the total [allocatable CPU cores](https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node-allocatable.md) is also shown.","editable":true,"error":false,"fill":1,"fillGradient":0,"grid":{"threshold1Color":"rgba(216, 200, 27, 0.27)","threshold2Color":"rgba(234, 112, 112, 0.22)"},"gridPos":{"h":8,"w":24,"x":0,"y":18},"hiddenSeries":false,"id":2,"isNew":false,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":250,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"Actual Usage","linewidth":3},{"alias":"Actual Usage","fill":5}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\", namespace=\"$namespace\"})","format":"time_series","intervalFactor":1,"legendFormat":"Actual Usage","refId":"E"},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"limits.memory\", type=\"hard\"}","format":"time_series","hide":false,"instant":false,"interval":"","intervalFactor":1,"legendFormat":"Memory Quota Limits","refId":"A","step":20},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"requests.memory\", type=\"hard\"}","format":"time_series","intervalFactor":1,"legendFormat":"Memory Quota Requests","refId":"C"},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"limits.memory\", type=\"used\"}","format":"time_series","intervalFactor":1,"legendFormat":"Memory Allocated Limits","refId":"B"},{"expr":"kube_resourcequota{namespace=\"$namespace\", resource=\"requests.memory\", type=\"used\"}","format":"time_series","intervalFactor":1,"legendFormat":"Memory Allocated Requests","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory","tooltip":{"msResolution":false,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":null,"format":"bytes","label":"Memory","logBase":1,"min":"0","show":true},{"decimals":null,"format":"short","label":"","logBase":1,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":22,"style":"dark","tags":[],"templating":{"list":[{"allValue":".*","current":{},"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","definition":"","hide":0,"includeAll":true,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":"label_values(kube_pod_info, namespace)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-5m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Openshift / Projects Resources","uid":"Admin-6","version":5}
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: grafana-dashboards-end-user
      namespace: "${NAMESPACE}"
      labels:
        app: grafana
        template: grafana
    data:    
      dashboard-namespace-end-user.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1589385815976,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":4,"panels":[],"repeat":null,"title":"Namespace Usage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":3,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":0,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sideWidth":null,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}) by (pod_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage by pod","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":3,"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_usage_bytes{namespace=\"$namespace\", container_name!=\"\"}) by (pod_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage by pod","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":8},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) ","legendFormat":"Limit","refId":"C"},{"expr":" sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"})","format":"time_series","intervalFactor":2,"legendFormat":"Usage ","legendLink":null,"refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","legendFormat":"Request ","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":8},"hiddenSeries":false,"id":8,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) \r","format":"time_series","intervalFactor":2,"legendFormat":"Limit","legendLink":null,"refId":"A","step":10},{"expr":"sum (container_memory_working_set_bytes{namespace=\"$namespace\"})","format":"time_series","intervalFactor":2,"legendFormat":"Usage","legendLink":null,"refId":"B","step":10},{"expr":" sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","format":"time_series","intervalFactor":2,"legendFormat":"Request","legendLink":null,"refId":"C","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"3","logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","description":"In addition to persistent storage, pods and containers may require ephemeral or transient local storage for their operation. The lifetime of this ephemeral storage does not extend beyond the life of the individual pod, and this ephemeral storage cannot be shared across pods.","fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":15},"hiddenSeries":false,"id":10,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_fs_usage_bytes{namespace=\"$namespace\"}) by (pod_name)","format":"time_series","instant":false,"intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Ephemeral Storage Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":21},"id":5,"panels":[],"repeat":null,"title":"CPU Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":8,"w":24,"x":0,"y":22},"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":3,"desc":true},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"CPU Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"CPU Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Pod","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":true,"linkTooltip":"Drill down","linkUrl":"/d/admin-4/openshift-pod?var-namespace=$namespace&var-pod=$__cell","pattern":"pod","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CPU Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":30},"id":7,"panels":[],"repeat":null,"title":"Memory Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":6,"w":24,"x":0,"y":31},"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":3,"desc":true},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"Memory Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Memory Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Pod","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":true,"linkTooltip":"Drill down","linkUrl":"/d/admin-4/openshift-pod?var-namespace=$namespace&var-pod=$__cell","pattern":"pod","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\",container_name!=\"\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\",container_name!=\"\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\",container_name!=\"\"}, \"pod\", \"$1\", \"pod_name\", \"(.*)\")) by (pod) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\"}) by (pod)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Memory Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]}],"refresh":"1m","schemaVersion":22,"style":"dark","tags":["namespace ","cpu","memory"],"templating":{"list":[{"current":{"text":"openshift-monitoring-datasource","value":"openshift-monitoring-datasource"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{},"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","definition":"label_values(kube_pod_info{namespace!~\"^openshift-.+|^prometheus|^cluster-monit.+|default|trident|kube-system\"}, namespace)","hide":0,"includeAll":true,"label":"Project","multi":false,"name":"namespace","options":[],"query":"label_values(kube_pod_info{namespace!~\"^openshift-.+|^prometheus|^cluster-monit.+|default|trident|kube-system\"}, namespace)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"OpenShift / Namespace","uid":"end-user-1","version":13}
      dashboard-pod-enduser.json: |
        {"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1589385822969,"links":[],"panels":[{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":0},"id":4,"panels":[],"repeat":null,"title":"CPU Usage","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":10,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":0,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\"}) by (container_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{container_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":10,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":0,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\", container_name!=\"\"}) by (container_name)","format":"time_series","intervalFactor":2,"legendFormat":"{{container_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":3,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":8},"hiddenSeries":false,"id":9,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) ","hide":false,"legendFormat":"Limit","refId":"C"},{"expr":" sum(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\",pod_name=\"$pod\"})","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"Usage ","legendLink":null,"refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","hide":false,"legendFormat":"Request ","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":0,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":8},"hiddenSeries":false,"id":11,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":" sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1)) \r","format":"time_series","intervalFactor":2,"legendFormat":"Limit","legendLink":null,"refId":"A","step":10},{"expr":"pod_name:container_memory_usage_bytes:sum{namespace=\"$namespace\",pod_name=\"$pod\"}","format":"time_series","intervalFactor":2,"legendFormat":"Usage","legendLink":null,"refId":"B","step":10},{"expr":" sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\",pod=\"$pod\"}  and on(pod, namespace)(kube_pod_status_phase{phase=\"Running\"}==1))","format":"time_series","intervalFactor":2,"legendFormat":"Request","legendLink":null,"refId":"C","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"bytes","label":"3","logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","decimals":null,"description":"In addition to persistent storage, pods and containers may require ephemeral or transient local storage for their operation. The lifetime of this ephemeral storage does not extend beyond the life of the individual pod, and this ephemeral storage cannot be shared across pods.","fill":1,"fillGradient":0,"gridPos":{"h":6,"w":24,"x":0,"y":15},"hiddenSeries":false,"id":12,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":null,"sortDesc":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"dataLinks":[]},"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"container_fs_usage_bytes{pod_name=\"$pod\",container_name!=\"POD\"}","format":"time_series","hide":false,"intervalFactor":2,"legendFormat":"{{pod_name}}","legendLink":null,"refId":"A","step":10}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Ephemeral Storage Usage","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":21},"id":5,"panels":[],"repeat":null,"title":"CPU Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":4,"w":24,"x":0,"y":22},"id":1,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":null,"desc":false},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"CPU Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"CPU Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"short"},{"alias":"CPU Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Container","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"container","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(namespace_pod_name_container_name:container_cpu_usage_seconds_total:sum_rate{namespace=\"$namespace\", pod_name=\"$pod\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"CPU Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]},{"collapsed":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","gridPos":{"h":1,"w":24,"x":0,"y":26},"id":7,"panels":[],"repeat":null,"title":"Memory Quota","type":"row"},{"aliasColors":{},"bars":false,"columns":[],"dashLength":10,"dashes":false,"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","fill":1,"fontSize":"100%","gridPos":{"h":4,"w":24,"x":0,"y":27},"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{},"pageSize":null,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","scroll":true,"seriesOverrides":[],"showHeader":true,"sort":{"col":0,"desc":true},"spaceLength":10,"stack":false,"steppedLine":false,"styles":[{"alias":"Time","align":"auto","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"Memory Usage","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #A","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #B","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Requests %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #C","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Memory Limits","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #D","thresholds":[],"type":"number","unit":"decbytes"},{"alias":"Memory Limits %","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"Value #E","thresholds":[],"type":"number","unit":"percentunit"},{"alias":"Container","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"link":false,"linkTooltip":"Drill down","linkUrl":"","pattern":"container","thresholds":[],"type":"number","unit":"short"},{"alias":"","align":"auto","colorMode":null,"colors":[],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"pattern":"/.*/","thresholds":[],"type":"string","unit":"short"}],"targets":[{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\", container_name!=\"\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"A","step":10},{"expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"B","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_requests_memory_bytes{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"C","step":10},{"expr":"sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\", pod=\"$pod\", container_name!=\"\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"D","step":10},{"expr":"sum(label_replace(container_memory_usage_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"\"}, \"container\", \"$1\", \"container_name\", \"(.*)\")) by (container) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"$namespace\", pod=\"$pod\"}) by (container)","format":"table","instant":true,"intervalFactor":2,"legendFormat":"","refId":"E","step":10}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Memory Quota","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transform":"table","type":"table","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]}],"refresh":false,"schemaVersion":22,"style":"dark","tags":["pod"],"templating":{"list":[{"current":{"text":"openshift-monitoring-datasource","value":"openshift-monitoring-datasource"},"hide":2,"includeAll":false,"label":null,"multi":false,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{},"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","definition":"label_values(kube_pod_info{namespace!~\"^openshift-.+|^prometheus|^cluster-monit.+|default|trident|kube-system\"}, namespace)","hide":0,"includeAll":false,"label":"namespace","multi":false,"name":"namespace","options":[],"query":"label_values(kube_pod_info{namespace!~\"^openshift-.+|^prometheus|^cluster-monit.+|default|trident|kube-system\"}, namespace)","refresh":1,"regex":"","skipUrlSync":false,"sort":2,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"${DS_OPENSHIFT_MONITORING_DATASOURCE}","definition":"label_values(kube_pod_info{namespace=\"$namespace\"}, pod)","hide":0,"includeAll":false,"label":"pod","multi":false,"name":"pod","options":[],"query":"label_values(kube_pod_info{namespace=\"$namespace\"}, pod)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"OpenShift / Pod","uid":"end-user-2","version":11}
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: grafana-datasource
      labels:
        app: grafana
        template: grafana
      namespace: "${NAMESPACE}"
    data:
      datasources.yaml: |
        apiVersion: 1
        datasources:
        - name: "${DS_OPENSHIFT_MONITORING_DATASOURCE}"
          type: prometheus
          access: proxy
          url: "${PROMETHEUS_DATASOURCE}"
          basicAuth: false
          withCredentials: false
          isDefault: true
          jsonData:
            tlsSkipVerify: true
            httpHeaderName1: "Authorization"
          secureJsonData:
            httpHeaderValue1: "Bearer ${SECURITY_TOKEN}"
          editable: true
  - apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      name: grafana-data
      labels:
        app: grafana
        template: grafana
      namespace: "${NAMESPACE}"
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: "${GRAFANA_PV_SIZE}"
  - apiVersion: batch/v1
    kind: Job
    metadata:
      namespace: "${NAMESPACE}"
      name: "${NAMESPACE}"
    spec:
      template:
        spec:
          initContainers:
          - name: wait-for-grafana
            image: appropriate/curl
            resources:
              limits:
                cpu: 150m
                memory: 50Mi
              requests:
                cpu: 150m
                memory: 50Mi
            args:
            - "sh"
            - "-c"
            - "while [ $(curl -sw %{http_code} http://grafana:3000/login -o /dev/null) -ne 200 ]; do sleep 15; done"
          containers:
          - name: set-permissions
            image: appropriate/curl
            command: ['sh', '-c', 'curl -s -X POST -H "Content-Type: application/json" -d "" admin:Ws2Fb1hpf4@grafana:3000/api/folders/3n_y7XlZz/permissions']
          restartPolicy: Never